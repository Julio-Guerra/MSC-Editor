msc connection; 
inst Initiator;
inst Responder; 
gate out ICONreq to Initiator;
gate in ICONind from Responder;
gate out ICONresp to Responder;
gate in ICONinf from Initiator;

Initiator: instance;
condition when Disconnected shared all;
in ICONreq from env;
starttimer T;
out ICON to Responder;
condition Wait_For_Resp shared all;
in ICONF from Responder;
stoptimer T;
out ICONconf to env;
condition Connected shared all;
endinstance;
Responder: instance;
condition when Disconnected shared all;
in ICON from Initiator;
out ICONind to env;
condition Wait_For_Resp shared all;
in ICONresp from env;
out ICONF to Initiator;
condition Connected shared all;
endinstance;
endmsc; 
